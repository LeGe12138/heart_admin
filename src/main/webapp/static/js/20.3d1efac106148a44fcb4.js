webpackJsonp([20],{1021:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),t._v(" 论坛管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("论坛列表")])],1)],1),t._v(" "),a("div",{staticClass:"handle-box"},[a("div",{staticClass:"table"},[a("div",{staticClass:"handle-box mb15"},[a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"delete"},on:{click:t.deleteArticles}},[t._v("批量删除")]),t._v(" "),a("el-button",{staticClass:"right",attrs:{type:"primary",icon:"search"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("el-input",{staticClass:"handle-input mr10 right",staticStyle:{width:"200px"},attrs:{placeholder:"筛选关键词"},model:{value:t.selectWord,callback:function(e){t.selectWord=e},expression:"selectWord"}})],1),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"#",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.$index+1))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"用户",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"类型",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"内容",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{domProps:{innerHTML:t._s(e.row.content)}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"publish_date",label:"日期",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.getFirstLevelComment(e.row.forum_id)}}},[t._v("一级评论")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){t.getMoreLevelComment(e.row.forum_id)}}},[t._v("多级评论")])]}}])})],1),t._v(" "),t.total>10?a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1):t._e()],1),t._v(" "),a("el-dialog",{staticStyle:{width:"110%","margin-left":"-8%"},attrs:{title:"一级评论",visible:t.firstLevelVisible},on:{"update:visible":function(e){t.firstLevelVisible=e}}},[a("el-table",{attrs:{data:t.firstLevelComment}},[a("el-table-column",{attrs:{property:"user_name",label:"账号",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"comment_date",label:"日期",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"content",label:"内容",width:"330"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(a){t.deleteFirstComment(e.row.comment_id)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("el-dialog",{staticStyle:{width:"130%","margin-left":"-14%"},attrs:{title:"多级评论",visible:t.moreLevelVisible},on:{"update:visible":function(e){t.moreLevelVisible=e}}},[a("el-table",{attrs:{data:t.moreLevelComment}},[a("el-table-column",{attrs:{property:"user_one",label:"评论者",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"user_two",label:"被评论者",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"fml_comment_date",label:"日期",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"fml_content",label:"内容",width:"330"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(a){t.deleteMoreComment(e.row.ml_comment_id)}}},[t._v("删除")])]}}])})],1)],1)],1)])},staticRenderFns:[]}},1043:function(t,e,a){var l=a(722);"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);a(197)("0ca35fc6",l,!0)},513:function(t,e,a){a(1043);var l=a(198)(a(601),a(1021),"data-v-ee2ce1f2",null);t.exports=l.exports},601:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"forum-list",data:function(){return{tableData:[],firstLevelComment:[],moreLevelComment:[],currentPage:1,multipleSelection:[],selectWord:"",total:"",firstLevelVisible:!1,moreLevelVisible:!1,currentForumId:""}},created:function(){this.getData()},methods:{handleCurrentChange:function(t){this.currentPage=t,this.getData()},getData:function(){var t=this;t.$axios.post("/mapis/forum/getForumList",{page:t.currentPage}).then(function(e){e.data.state&&(t.tableData=e.data.list,t.total=e.data.total)})},search:function(){var t=this;if("string"!=typeof t.selectWord||t.selectWord.length<=0)return void t.$message.error("搜索内容不可为空");t.$axios.post("/mapis/forum/searchForums",{keyWord:t.selectWord}).then(function(e){e.data.state&&(t.tableData=e.data.list,t.total=e.data.total)})},deleteArticles:function(){var t=this,e=[];if(t.multipleSelection.length<=0)return void t.$message.error("请至少选择一条数据");e=t.multipleSelection.map(function(t){return t.forum_id}),t.$axios.post("/mapis/forum/deleteForums",{forumsId:e}).then(function(e){t.multipleSelection=[],e.data.state&&t.getData()})},handleSelectionChange:function(t){this.multipleSelection=t},deleteMoreComment:function(t){var e=this;e.$axios.post("/mapis/forum/deleteMoreLevelComment",{commentId:t}).then(function(t){t.data.state&&(e.$message("复合评论删除成功"),e.getMoreLevelComment(e.currentForumId))})},deleteFirstComment:function(t){var e=this;e.$axios.post("/mapis/forum/deleteFirstLevelComment",{commentId:t}).then(function(t){t.data.state&&(e.$message("评论删除成功"),e.getFirstLevelComment(e.currentForumId))})},getMoreLevelComment:function(t){var e=this;e.currentForumId=t,e.$axios.post("/mapis/forum/getMoreLevelComment",{forumId:t}).then(function(t){t.data.state&&(e.moreLevelComment=t.data.list,e.moreLevelVisible=!0)})},getFirstLevelComment:function(t){var e=this;e.currentForumId=t,e.$axios.post("/mapis/forum/getFirstLevelComment",{forumId:t}).then(function(t){t.data.state&&(e.firstLevelComment=t.data.list,e.firstLevelVisible=!0)})}}}},722:function(t,e,a){e=t.exports=a(87)(!1),e.push([t.i,".ms-doc[data-v-ee2ce1f2]{width:100%;max-width:980px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif}.ms-doc h3[data-v-ee2ce1f2]{padding:9px 10px 10px;margin:0;font-size:14px;line-height:17px;background-color:#f5f5f5;border:1px solid #d8d8d8;border-bottom:0;border-radius:3px 3px 0 0}.ms-doc article[data-v-ee2ce1f2]{padding:45px;word-wrap:break-word;background-color:#fff;border:1px solid #ddd;border-bottom-right-radius:3px;border-bottom-left-radius:3px}.ms-doc article h1[data-v-ee2ce1f2]{font-size:32px;padding-bottom:10px;margin-bottom:15px;border-bottom:1px solid #ddd}.ms-doc article h2[data-v-ee2ce1f2]{margin:24px 0 16px;font-weight:600;line-height:1.25;padding-bottom:7px;font-size:24px;border-bottom:1px solid #eee}.ms-doc article p[data-v-ee2ce1f2]{margin-bottom:15px;line-height:1.5}.ms-doc article .el-checkbox[data-v-ee2ce1f2]{margin-bottom:5px}",""])}});